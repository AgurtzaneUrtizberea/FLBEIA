source('~/Google Drive/Myfish/FLBEIA/R/Myfish_MPro_Final_Runs_CHECKING.R')
source('~/Google Drive/Myfish/FLBEIA/R/Myfish_MPro_Final_Runs_CHECKING.R')
2024-1980+1
##==============================================================================
#               FINAL  Myfish Simulations June 2015 (Paris)
#                     TRADITIONAL FLEET DYNAMCICS
#
# o 4 Scenarios:
#     * 2013-2015: HISTORICAL TAC (trad.hist)
#     * 2015-2025:
#         * NO LANDING OBLIGATION:
#               - MSY reference point - NO LAND.OBLI:   ices.mpro
#               - MSMSY reference point - NO LAND.OBLI: msmsy.mpro
#         * LANDING OBLIGATION:
#               - MSY reference point - NO LAND.OBLI:   ices_lo.mpro
#               - MSMSY reference point - NO LAND.OBLI: msmsy_lo.mpro
#
# Dorleta Garcia
#
# 2015/06/11
#==============================================================================
rm(list=ls())
#==============================================================================
# Section 1:            Load libraries
#==============================================================================
library(FLCore)
library(FLAssess)
library(FLash)
library(nloptr)
library(FLFleet)
library(FLBEIA)
library(devtools)
#==============================================================================
# Section 2:            Set directory, Load Objects.
#==============================================================================
scriptnm <- 'Final_MPro'
# iter <- as.numeric(Sys.getenv("SGE_TASK_ID"))
iter <- 5
setwd('c:/use/google drive/MyFish/FLBEIA/')
# load(file.path("input", paste("Myfish_",iter,".RData", sep = "")))
load(file.path("data/gridDataSets", paste("MyFish_",iter,".RData", sep = "")))
scriptnm <- 'MPro'
main.ctrl[[1]][2] <- '2025'
outputPath = file.path("output", paste("res",scriptnm,"_",iter,".RData", sep = ""))
##==============================================================================
##  Section 3:       Run FLBEIA
##==============================================================================
#
# 0. histTAC_mpro
main.ctrl_histTAC <- main.ctrl
main.ctrl_histTAC[[1]][2] <- 2015
histTAC_mpro <- FLBEIA(biols = biols, SRs = SRs, BDs = NULL, fleets=fleets, covars = covars,
indices = NULL, advice = advice, main.ctrl = main.ctrl_histTAC,
biols.ctrl = biols.ctrl, fleets.ctrl = fleets.ctrl.mpro,
covars.ctrl = covars.ctrl, obs.ctrl = obs.ctrl,
assess.ctrl = assess.ctrl, advice.ctrl = advice.ctrl.fixed)
# 1. ices_mpro
biols  <- histTAC_mpro$biols
fleets <- histTAC_mpro$fleets
covars <- histTAC_mpro$covars
advice <- histTAC_mpro$advice
for(st in names(SRs)) SRs[[st]]@ssb[,ac(2013:2016)] <- ssb(biols[[st]])[,ac(2013:2016)]
main.ctrl[[1]][2] <- '2023'
ices.mpro  <- FLBEIA(biols = biols, SRs = SRs, BDs = NULL, fleets=fleets, covars = covars,
indices = NULL, advice = advice, main.ctrl = main.ctrl,
biols.ctrl = biols.ctrl, fleets.ctrl = fleets.ctrl.mpro,
covars.ctrl = covars.ctrl, obs.ctrl = obs.ctrl,
assess.ctrl = assess.ctrl, advice.ctrl = advice.ctrl.ices)
# 1. ices_mpro
biols  <- ices.mpro$biols
fleets <- ices.mpro$fleets
covars <- ices.mpro$covars
advice <- ices.mpro$advice
for(st in names(SRs)) SRs[[st]]@ssb[,ac(2013:2019)] <- ssb(biols[[st]])[,ac(2013:2019)]
main.ctrl[[1]][1] <- '2023'
main.ctrl[[1]][2] <- '2025'
ices.mpro2  <- FLBEIA(biols = biols, SRs = SRs, BDs = NULL, fleets=fleets, covars = covars,
indices = NULL, advice = advice, main.ctrl = main.ctrl,
biols.ctrl = biols.ctrl, fleets.ctrl = fleets.ctrl.mpro,
covars.ctrl = covars.ctrl, obs.ctrl = obs.ctrl,
assess.ctrl = assess.ctrl, advice.ctrl = advice.ctrl.ices)
for(st in names(SRs)) SRs[[st]]@ssb[,ac(2013:2024)] <- ssb(biols[[st]])[,ac(2013:2024)]
main.ctrl[[1]][1] <- '2023'
main.ctrl[[1]][2] <- '2025'
ices.mpro2  <- FLBEIA(biols = biols, SRs = SRs, BDs = NULL, fleets=fleets, covars = covars,
indices = NULL, advice = advice, main.ctrl = main.ctrl,
biols.ctrl = biols.ctrl, fleets.ctrl = fleets.ctrl.mpro,
covars.ctrl = covars.ctrl, obs.ctrl = obs.ctrl,
assess.ctrl = assess.ctrl, advice.ctrl = advice.ctrl.ices)
debug(SMFB)
ices.mpro2  <- FLBEIA(biols = biols, SRs = SRs, BDs = NULL, fleets=fleets, covars = covars,
indices = NULL, advice = advice, main.ctrl = main.ctrl,
biols.ctrl = biols.ctrl, fleets.ctrl = fleets.ctrl.mpro,
covars.ctrl = covars.ctrl, obs.ctrl = obs.ctrl,
assess.ctrl = assess.ctrl, advice.ctrl = advice.ctrl.ices)
debug(SMFB_lo)
ices.mpro2  <- FLBEIA(biols = biols, SRs = SRs, BDs = NULL, fleets=fleets, covars = covars,
indices = NULL, advice = advice, main.ctrl = main.ctrl,
biols.ctrl = biols.ctrl, fleets.ctrl = fleets.ctrl.mpro,
covars.ctrl = covars.ctrl, obs.ctrl = obs.ctrl,
assess.ctrl = assess.ctrl, advice.ctrl = advice.ctrl.ices)
undebug(SMFB_lo)
debug(fleet.om)
debug(fleets.om)
ices.mpro2  <- FLBEIA(biols = biols, SRs = SRs, BDs = NULL, fleets=fleets, covars = covars,
indices = NULL, advice = advice, main.ctrl = main.ctrl,
biols.ctrl = biols.ctrl, fleets.ctrl = fleets.ctrl.mpro,
covars.ctrl = covars.ctrl, obs.ctrl = obs.ctrl,
assess.ctrl = assess.ctrl, advice.ctrl = advice.ctrl.ices)
debug(SMFB_lo)
ices.mpro2  <- FLBEIA(biols = biols, SRs = SRs, BDs = NULL, fleets=fleets, covars = covars,
indices = NULL, advice = advice, main.ctrl = main.ctrl,
biols.ctrl = biols.ctrl, fleets.ctrl = fleets.ctrl.mpro,
covars.ctrl = covars.ctrl, obs.ctrl = obs.ctrl,
assess.ctrl = assess.ctrl, advice.ctrl = advice.ctrl.ices)
undebug(SMFB_lo)
ices.mpro2  <- FLBEIA(biols = biols, SRs = SRs, BDs = NULL, fleets=fleets, covars = covars,
indices = NULL, advice = advice, main.ctrl = main.ctrl,
biols.ctrl = biols.ctrl, fleets.ctrl = fleets.ctrl.mpro,
covars.ctrl = covars.ctrl, obs.ctrl = obs.ctrl,
assess.ctrl = assess.ctrl, advice.ctrl = advice.ctrl.ices)
debug(SMFB_lo)
900*75
